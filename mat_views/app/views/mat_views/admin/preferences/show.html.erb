<input type="hidden" id="mv-drawer-open-url-identifier" value="preferences_edit" %>
<div class="mv-card">
  <div class="mv-card-b">
    <%= form_with url: admin_preferences_path(frame_id: 'mv-drawer'), method: :put, data: { turbo_frame: :"mv-drawer" } do %>
      <!-- Theme -->
      <div class="mv-field">
        <div class="mv-label"><%= t("mat_views.settings.theme") %></div>
        <p class="mv-label mv-label--sublabel">
          <%= t("mat_views.settings.theme_hint") %>
        </p>
        <div class="mv-actions" style="justify-content:flex-start">
          <% [["auto", t("mat_views.settings.auto")], ["light", t("mat_views.settings.light")], ["dark", t("mat_views.settings.dark")]].each do |value, label| %>
            <label for="lang-<%= label %>" class="mv-btn mv-btn--secondary mv-btn--sm" style="gap:.4rem;">
              <input id="lang-<%= label %>" type="radio" name="theme" value="<%= value %>" <%= "checked" if @theme == value %> style="margin:0"/>
              <span><%= label %></span>
            </label>
          <% end %>
        </div>
      </div>
      <br/>
      <!-- Language -->
      <div class="mv-field">
        <label for="locale" class="mv-label"><%= t("mat_views.settings.language") %></label>
        <p class="mv-label mv-label--sublabel">
          <%= t("mat_views.settings.language_hint") %>
        </p>
        <select name="locale" id="locale" class="mv-select">
          <% @locales.each do |loc| %>
            <% label = MatViews::Engine.locale_code_mapping[loc.to_sym] %>
            <option value="<%= loc %>" <%= "selected" if @locale == loc %>>
              <%= label %>
            </option>
          <% end %>
        </select>
      </div>
      <div class="mv-actions">
        <%= mv_submit_button class: "mv-btn mv-btn--primary mv-btn--md",
                             testid: 'PREFERENCES_SAVE_BUTTON' do %>
          <%= t("mat_views.save_changes") %>
        <% end %>

        <%= mv_cancel_button variant: :ghost, data: { action: "click->drawer#close" },
                             testid: 'PREFERENCES_CANCEL_BUTTON' do %>
          <%= t("mat_views.cancel") %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
